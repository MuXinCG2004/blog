<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ github_info.name }} - 个人主页</title>
    <!-- 网页图标，使用用户头像并确保是圆形的 -->
    {% if github_info.avatar_url %}
    <link rel="icon" href="{{ github_info.avatar_url }}" type="image/png">
    <!-- 使用SVG过滤器确保头像显示为圆形 -->
    <svg width="0" height="0" style="position:absolute;">
        <filter id="roundAvatar">
            <feGaussianBlur in="SourceGraphic" stdDeviation="0" result="blur"/>
            <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo"/>
            <feComposite in="SourceGraphic" in2="goo" operator="atop"/>
        </filter>
    </svg>
    <style>
        link[rel="icon"] {
            filter: url(#roundAvatar);
        }
    </style>
    {% endif %}
    <!-- Tailwind CSS - 使用官方CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome - 使用国内CDN -->
    <link href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://unpkg.com/chart.js@4.4.0/dist/chart.umd.js"></script>
    <!-- Google Fonts - JetBrains Mono for terminal -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- 配置 Tailwind -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '{{ config.theme.primary_color }}',
                            dark: '{{ config.theme.dark_primary_color }}'
                        },
                        secondary: {
                            DEFAULT: '{{ config.theme.secondary_color }}',
                            dark: '{{ config.theme.dark_secondary_color }}'
                        },
                        'primary-dark': '{{ config.theme.dark_primary_color }}',
                        'secondary-dark': '{{ config.theme.dark_secondary_color }}'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                    },
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .bg-gradient-custom {
                background: linear-gradient(135deg, {{ config.theme.primary_color }}, {{ config.theme.secondary_color }});
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            /* 云母效果和边框光效 */
            .glass-panel {
                background: rgba(255, 255, 255, 0.6);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
                position: relative;
                overflow: hidden;
            }
            .glass-panel::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: linear-gradient(90deg, transparent, {{ config.theme.primary_color }}, transparent);
                animation: border-glow 4s ease-in-out infinite;
            }
            .glass-panel::before {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: linear-gradient(90deg, transparent, {{ config.theme.secondary_color }}, transparent);
                animation: border-glow 4s ease-in-out infinite reverse;
            }
            /* 深色模式下的边框光效 */
            .dark .glass-panel::after {
                background: linear-gradient(90deg, transparent, {{ config.theme.dark_primary_color }}, transparent);
            }
            .dark .glass-panel::before {
                background: linear-gradient(90deg, transparent, {{ config.theme.dark_secondary_color }}, transparent);
            }
            .dark .glass-panel {
                background: rgba(17, 24, 39, 0.6);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            }
            @keyframes border-glow {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
            }
        }
    </style>
    <style>
        body {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* 背景样式 */
        body {
            {% if background_exists %}
            background-color: #121212;
            {% endif %}
        }
        
        /* 在没有背景图片时使用默认背景色 */
        {% if not background_exists %}
        body {
            background-color: #f9fafb; /* bg-gray-50 的实际颜色值 */
        }
        body.dark {
            background-color: #111827; /* bg-gray-900 的实际颜色值 */
        }
        {% endif %}
        
        /* 背景图片容器 */
        .bg-container {
            {% if background_exists %}
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            {% endif %}
        }
        
        /* 背景图片 */
        .bg-image {
            {% if background_exists %}
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('{{ background_path }}');
            background-size: cover;
            background-position: center;
            filter: blur({{ config.background.blur }}px);
            transform: scale(1.1); /* 略微放大以避免边缘出现空白 */
            {% endif %}
        }
        
        /* 背景遮罩 */
        .bg-overlay {
            {% if background_exists %}
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: {{ config.background.overlay_color }};
            opacity: {{ config.background.overlay_opacity }};
            {% endif %}
        }
        
        /* 深色模式下的背景遮罩 */
        .dark .bg-overlay {
            {% if background_exists %}
            background-color: {{ config.background.dark_overlay_color }};
            {% endif %}
        }
        
        /* 动画样式 */
        .avatar-glow {
            animation: glow 3s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from {
                box-shadow: 0 0 5px rgba(106, 17, 203, 0.3);
            }
            to {
                box-shadow: 0 0 20px rgba(106, 17, 203, 0.8);
            }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .readme-content {
            animation: slideIn 0.8s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .repo-item {
            transition: all 0.3s ease;
        }
        .repo-item:hover {
            transform: translateX(5px);
        }
        .tech-icon {
            filter: drop-shadow(0 0 5px rgba(106, 17, 203, 0.5));
        }

        /* 命令行界面样式 */
        #terminal-cli {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 900px;
            max-height: 80vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            display: none;
            flex-direction: column;
            font-family: 'JetBrains Mono', monospace;
        }

        .dark #terminal-cli {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #terminal-cli.active {
            display: flex;
        }

        #terminal-header {
            background: linear-gradient(135deg, {{ config.theme.primary_color }}, {{ config.theme.secondary_color }});
            padding: 12px 20px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #terminal-title {
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        #terminal-close {
            color: white;
            cursor: pointer;
            font-size: 24px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        #terminal-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        #terminal-output {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            color: #374151;
            background: transparent;
        }

        .dark #terminal-output {
            color: #d1d5db;
        }

        #terminal-input-line {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.02);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 0 0 12px 12px;
        }

        .dark #terminal-input-line {
            background: rgba(255, 255, 255, 0.02);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        #terminal-prompt {
            color: {{ config.theme.primary_color }};
            margin-right: 10px;
            font-weight: 600;
        }

        .dark #terminal-prompt {
            color: {{ config.theme.dark_primary_color }};
        }

        #terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #1f2937;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
        }

        .dark #terminal-input {
            color: #f9fafb;
        }

        .terminal-line {
            margin: 8px 0;
            line-height: 1.6;
        }

        .terminal-error {
            color: #ef4444;
        }

        .terminal-success {
            color: {{ config.theme.primary_color }};
            font-weight: 500;
        }

        .dark .terminal-success {
            color: {{ config.theme.dark_primary_color }};
        }

        .terminal-info {
            color: {{ config.theme.secondary_color }};
        }

        .dark .terminal-info {
            color: {{ config.theme.dark_secondary_color }};
        }

        .terminal-post-content {
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.02);
            border-left: 3px solid {{ config.theme.primary_color }};
            border-radius: 4px;
            max-height: 400px;
            overflow-y: auto;
        }

        .dark .terminal-post-content {
            background: rgba(255, 255, 255, 0.05);
            border-left-color: {{ config.theme.dark_primary_color }};
        }
    </style>
</head>
<body class="text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- 命令行界面 -->
    <div id="terminal-cli">
        <div id="terminal-header">
            <span id="terminal-title">{{ config.name }}@blog:~$</span>
            <span id="terminal-close">&times;</span>
        </div>
        <div id="terminal-output"></div>
        <div id="terminal-input-line">
            <span id="terminal-prompt">$</span>
            <input type="text" id="terminal-input" autocomplete="off" />
        </div>
    </div>
    <!-- 背景容器 -->
    <div class="bg-container">
        <div class="bg-image"></div>
        <div class="bg-overlay"></div>
    </div>
    
    <!-- 顶部导航栏 -->
    <nav class="fixed w-full top-0 z-50 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-sm">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- 顶栏左上角显示头像和用户名 -->
            <div class="flex items-center space-x-3">
                {% if github_info.avatar_url %}
                <img 
                    src="{{ github_info.avatar_url }}" 
                    alt="{{ github_info.name }}" 
                    class="w-8 h-8 rounded-full border-2 border-white dark:border-gray-700 shadow-sm"
                >
                {% endif %}
                <span class="font-bold text-lg">{{ github_info.name }}</span>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 博客链接 -->
                <a href="blog.html" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" title="博客">
                    <i class="fa-solid fa-blog text-gray-700 dark:text-gray-300"></i>
                </a>

                <!-- 语言切换 -->
                <button id="language-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors relative" title="切换语言">
                    <span class="text-gray-700 dark:text-gray-300 font-medium text-sm">
                        <span class="lang-text">中文</span>
                    </span>
                </button>

                <!-- 极简模式开关 -->
                <button id="minimal-mode-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors relative">
                    <span class="sr-only">切换极简模式</span>
                    <i class="fa-solid fa-columns text-gray-700 dark:text-gray-300"></i>
                </button>

                <!-- 深色模式切换 -->
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    <i class="fa-solid fa-moon dark:hidden text-gray-700"></i>
                    <i class="fa-solid fa-sun hidden dark:block text-yellow-400"></i>
                </button>
                <a href="{{ config.github_url }}" target="_blank" rel="noopener noreferrer" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    <i class="fa-brands fa-github text-xl"></i>
                </a>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- 左侧个人信息 -->
            <div class="lg:col-span-1 animate-fade-in">
                <div class="glass-panel bg-white/30 dark:bg-gray-800/30 rounded-2xl shadow-xl p-6 card-hover">
                    <!-- 头像 -->
                    <div class="flex justify-center mb-6">
                        <img 
                            src="{{ github_info.avatar_url }}" 
                            alt="{{ github_info.name }}" 
                            class="w-36 h-36 rounded-full border-4 border-white dark:border-gray-700 shadow-lg avatar-glow"
                        >
                    </div>
                    <!-- 基本信息 -->
                    <div class="text-center mb-6">
                        <h1 class="text-2xl font-bold mb-2">{{ github_info.name }}</h1>
                        <p class="text-gray-600 dark:text-gray-400 mb-4">{{ github_info.bio }}</p>
                        <a 
                            href="{{ config.github_url }}" 
                            target="_blank" 
                            rel="noopener noreferrer" 
                            class="inline-flex items-center px-4 py-2 rounded-full bg-gradient-custom text-white font-medium hover:opacity-90 transition-opacity"
                        >
                            <i class="fa-brands fa-github mr-2"></i>
                            <span data-i18n="visit-github">访问我的 GitHub</span>
                        </a>
                    </div>
                    <!-- 统计信息 -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-xl p-4 text-center">
                            <div class="text-2xl font-bold text-primary dark:text-primary-dark mb-1">{{ github_info.total_repos }}</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400" data-i18n="total-repos">总仓库数</div>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-xl p-4 text-center">
                            <div class="text-2xl font-bold text-secondary dark:text-secondary-dark mb-1">{{ github_info.total_stars }}</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400" data-i18n="total-stars">总 Stars</div>
                        </div>
                    </div>
                    <!-- 技术标签 -->
                <div class="mt-6">
                    <h3 class="text-lg font-semibold mb-3" data-i18n="tech-stack">技术栈</h3>
                    <div class="flex flex-wrap gap-2">
                        {% if github_info and github_info.tech_stack %}
                            {% for tech in github_info.tech_stack %}
                                <span class="px-3 py-1 rounded-full text-sm flex items-center text-white dark:text-white" style="background-color: {{ tech.color }};">
                                    <i class="fa-solid fa-code mr-1 tech-icon"></i>
                                    {{ tech.name }}
                                </span>
                            {% endfor %}
                        {% else %}
                            <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm flex items-center">
                                <i class="fa-solid fa-code mr-1 tech-icon"></i>
                            Python
                            </span>
                            <span class="px-3 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-full text-sm flex items-center">
                                <i class="fa-solid fa-code mr-1 tech-icon"></i>
                            JavaScript
                            </span>
                            <span class="px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full text-sm flex items-center">
                                <i class="fa-solid fa-code mr-1 tech-icon"></i>
                            HTML/CSS
                            </span>
                            <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm flex items-center">
                                <i class="fa-solid fa-code mr-1 tech-icon"></i>
                            Flask
                            </span>
                        {% endif %}
                    </div>
                </div>
                </div>
                
                <!-- 活动图表 -->
                <div class="glass-panel bg-white/30 dark:bg-gray-800/30 rounded-2xl shadow-xl p-6 mt-6 card-hover animate-fade-in" style="animation-delay: 0.2s;">
                    <h3 class="text-lg font-semibold mb-3" data-i18n="activity-overview">GitHub 活动概览</h3>
                    <div class="h-64">
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>

                <!-- 最近仓库 -->
                <div class="glass-panel bg-white/30 dark:bg-gray-800/30 rounded-2xl shadow-xl p-6 mt-6 card-hover animate-fade-in" style="animation-delay: 0.3s;">
                    <h2 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fa-solid fa-folder-open text-primary dark:text-primary-dark mr-2"></i>
                        <span data-i18n="recent-projects">最近项目</span>
                    </h2>
                    <div class="space-y-3">
                        {% if github_info.recent_repos %}
                            {% for repo in github_info.recent_repos %}
                                <a href="{{ repo.html_url }}" target="_blank" rel="noopener noreferrer" class="block p-3 bg-gray-50 dark:bg-gray-700 rounded-lg repo-item hover:bg-gray-100 dark:hover:bg-gray-600">
                                    <div class="flex justify-between items-start mb-1">
                                        <h3 class="text-base font-semibold text-primary dark:text-primary-dark">{{ repo.name }}</h3>
                                        <span class="text-xs text-gray-500 dark:text-gray-400 flex items-center">
                                            <i class="fa-solid fa-star mr-1"></i>
                                            {{ repo.stargazers_count }}
                                        </span>
                                    </div>
                                    <p class="text-gray-600 dark:text-gray-400 text-xs mb-1 line-clamp-2">{{ repo.description }}</p>
                                    <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                        <span>{{ repo.language }}</span>
                                        <span class="update-date" data-date="{{ repo.pushed_at }}">{{ repo.pushed_at[:10] if repo.pushed_at else '未知' }}</span>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="p-4 text-center text-gray-500 dark:text-gray-400">
                                <i class="fa-solid fa-folder-open text-2xl mb-2"></i>
                                <p class="text-sm">暂无项目数据</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- 右侧内容区域 -->
            <div class="lg:col-span-2">
                <!-- 最近博客 - 置顶显眼位置 -->
                <div class="glass-panel bg-white/30 dark:bg-gray-800/30 rounded-2xl shadow-xl p-6 card-hover animate-fade-in border-2 border-primary/20 dark:border-primary-dark/20">
                    <h2 class="text-3xl font-bold mb-5 flex items-center">
                        <i class="fa-solid fa-blog text-primary dark:text-primary-dark mr-3 text-2xl"></i>
                        <span data-i18n="recent-blog">最近博客</span>
                        <a href="blog.html" class="ml-auto text-base font-normal text-primary dark:text-primary-dark hover:underline" data-i18n="view-all">查看全部 →</a>
                    </h2>
                    <div class="space-y-4" id="recent-posts-container">
                        {% if recent_posts %}
                            {% for post in recent_posts %}
                                <a href="post/{{ post.slug }}.html" class="blog-post-item block p-5 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-xl repo-item hover:bg-gradient-to-r hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-600 dark:hover:to-gray-700 border border-gray-200 dark:border-gray-600" data-lang="{{ post.lang }}">
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="text-xl font-bold text-primary dark:text-primary-dark">{{ post.title }}</h3>
                                        <span class="text-sm text-gray-500 dark:text-gray-400 font-medium">{{ post.date }}</span>
                                    </div>
                                    <p class="text-gray-600 dark:text-gray-400 text-sm mb-3 leading-relaxed">{{ post.summary }}</p>
                                    <div class="flex gap-2 flex-wrap">
                                        {% for tag in post.tags %}
                                            <span class="text-xs px-3 py-1 bg-primary/20 text-primary dark:bg-primary-dark/20 dark:text-primary-dark rounded-full font-medium">{{ tag }}</span>
                                        {% endfor %}
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="p-8 text-center text-gray-500 dark:text-gray-400">
                                <i class="fa-solid fa-blog text-5xl mb-4 text-primary/30 dark:text-primary-dark/30"></i>
                                <p class="text-lg">暂无博客文章</p>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- README 内容 -->
                <div class="glass-panel bg-white/30 dark:bg-gray-800/30 rounded-2xl shadow-xl p-6 mt-6 readme-content">
                    <h2 class="text-2xl font-bold mb-4 flex items-center">
                        <i class="fa-solid fa-file-lines text-primary dark:text-primary-dark mr-2"></i>
                        <span data-i18n="introduction">个人介绍</span>
                    </h2>
                    <div class="prose dark:prose-invert max-w-none" id="readme-content">
                        {{ github_info.readme_content|safe }}
                    </div>
                </div>
                <style>
                    /* GitHub风格的README样式 */
                    #readme-content {
                        line-height: 1.6;
                    }
                    #readme-content img {
                        max-width: 100%;
                        height: auto;
                        display: inline-block;
                    }
                    #readme-content img[align="center"] {
                        display: block;
                        margin: 0 auto;
                    }
                    #readme-content img[align="left"] {
                        float: left;
                        margin-right: 1rem;
                    }
                    #readme-content img[align="right"] {
                        float: right;
                        margin-left: 1rem;
                    }
                    #readme-content [align="center"] {
                        text-align: center;
                    }
                    #readme-content [align="left"] {
                        text-align: left;
                    }
                    #readme-content [align="right"] {
                        text-align: right;
                    }
                    #readme-content table {
                        width: auto;
                        margin: 1rem auto;
                        border-collapse: collapse;
                    }
                    #readme-content table td,
                    #readme-content table th {
                        padding: 0.5rem 1rem;
                        border: none;
                    }
                    #readme-content h1 {
                        clear: both;
                        padding-top: 1rem;
                    }
                    #readme-content h3 {
                        clear: both;
                        font-weight: 600;
                        margin: 1rem 0;
                    }
                    #readme-content br {
                        clear: both;
                    }
                    #readme-content ul {
                        list-style: none;
                        padding-left: 0;
                    }
                    #readme-content li {
                        margin: 0.5rem 0;
                    }
                    /* 清除浮动 */
                    #readme-content::after {
                        content: "";
                        display: table;
                        clear: both;
                    }
                </style>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="glass-panel bg-white/30 dark:bg-gray-800/30 shadow-inner py-6">
        <div class="container mx-auto px-4 text-center text-gray-600 dark:text-gray-400">
            <p>© {{ now.year }} {{ github_info.name }}. <a href="https://github.com/SRInternet/Home_Page/" target="_blank">个人主页</a>由 Flask + Tailwind CSS 驱动。</p>
            <div class="mt-3 space-x-4">
                <!-- 联系方式图标，仅在配置了有效URL时显示 -->
                {% if config.contact.qq and config.contact.qq != '' %}
                <a href="{{ config.contact.qq }}" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-primary-dark transition-colors">
                    <i class="fa-brands fa-qq"></i>
                </a>
                {% endif %}
                {% if config.contact.wechat and config.contact.wechat != '' %}
                <a href="{{ config.contact.wechat }}" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-primary-dark transition-colors">
                    <i class="fa-brands fa-weixin"></i>
                </a>
                {% endif %}
                {% if config.contact.bilibili and config.contact.bilibili != '' %}
                <a href="{{ config.contact.bilibili }}" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-primary-dark transition-colors">
                    <i class="fa-brands fa-bilibili"></i>
                </a>
                {% endif %}
                {% if config.contact.douyin and config.contact.douyin != '' %}
                <a href="{{ config.contact.douyin }}" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-primary-dark transition-colors">
                    <i class="fa-brands fa-tiktok"></i>
                </a>
                {% endif %}
                {% if config.contact.xiaohongshu and config.contact.xiaohongshu != '' %}
                <a href="{{ config.contact.xiaohongshu }}" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-primary-dark transition-colors">
                    <i class="fa-solid fa-book"></i>
                </a>
                {% endif %}
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 国际化翻译数据
        const i18n = {
            'zh': {
                'visit-github': '访问我的 GitHub',
                'total-repos': '总仓库数',
                'total-stars': '总 Stars',
                'tech-stack': '技术栈',
                'activity-overview': 'GitHub 活动概览',
                'introduction': '个人介绍',
                'recent-projects': '最近项目',
                'recent-blog': '最近博客',
                'view-all': '查看全部 →',
                'github-activity': 'GitHub 活动',
                'months': ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']
            },
            'en': {
                'visit-github': 'Visit my GitHub',
                'total-repos': 'Total Repos',
                'total-stars': 'Total Stars',
                'tech-stack': 'Tech Stack',
                'activity-overview': 'GitHub Activity Overview',
                'introduction': 'Introduction',
                'recent-projects': 'Recent Projects',
                'recent-blog': 'Recent Blog',
                'view-all': 'View All →',
                'github-activity': 'GitHub Activity',
                'months': ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            }
        };

        // 深色模式切换
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            const languageToggle = document.getElementById('language-toggle');
            const htmlElement = document.documentElement;
            
            // 检查本地存储或系统偏好
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // 根据配置设置初始主题
            const configDarkMode = '{{ config.dark_mode }}';
            if (savedTheme) {
                htmlElement.classList.toggle('dark', savedTheme === 'dark');
            } else if (configDarkMode === 'auto') {
                htmlElement.classList.toggle('dark', prefersDark);
            } else if (configDarkMode === 'dark') {
                htmlElement.classList.add('dark');
            }
            
            // 主题切换事件
            themeToggle.addEventListener('click', function() {
                htmlElement.classList.toggle('dark');
                localStorage.setItem('theme', htmlElement.classList.contains('dark') ? 'dark' : 'light');
            });
            
            // 监听系统主题变化
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
                if (configDarkMode === 'auto' && !localStorage.getItem('theme')) {
                    htmlElement.classList.toggle('dark', e.matches);
                }
            });

            /* 语言切换功能 */
            let currentLang = localStorage.getItem('language') || 'en';

            // 切换语言函数
            function setLanguage(lang) {
                currentLang = lang;
                localStorage.setItem('language', lang);

                // 更新所有带有 data-i18n 属性的元素
                document.querySelectorAll('[data-i18n]').forEach(elem => {
                    const key = elem.getAttribute('data-i18n');
                    if (i18n[lang] && i18n[lang][key]) {
                        elem.textContent = i18n[lang][key];
                    }
                });

                // 更新语言切换按钮文本
                const langText = document.querySelector('.lang-text');
                if (langText) {
                    langText.textContent = lang === 'zh' ? '中文' : 'EN';
                }

                // 更新图表标签
                updateChartLanguage(lang);

                // 筛选博客文章
                filterBlogPosts(lang);
            }

            // 更新图表语言
            function updateChartLanguage(lang) {
                const chartCanvas = document.getElementById('activityChart');
                if (chartCanvas && window.Chart) {
                    // 重新创建图表以更新语言
                    const isDark = htmlElement.classList.contains('dark');
                    const textColor = isDark ? '#9CA3AF' : '#4B5563';

                    // 获取现有的 chart 实例并销毁
                    const existingChart = Chart.getChart(chartCanvas);
                    if (existingChart) {
                        existingChart.destroy();
                    }

                    // 使用当前语言的月份标签
                    const monthLabels = i18n[lang]['months'];

                    // 创建新图表
                    new Chart(chartCanvas, {
                        type: 'line',
                        data: {
                            labels: monthLabels,
                            datasets: [{
                                label: i18n[lang]['github-activity'],
                                data: {{ github_info.activity_data | tojson }},
                                borderColor: isDark ? '{{ config.theme.dark_primary_color }}' : '{{ config.theme.primary_color }}',
                                backgroundColor: isDark ? 'rgba(168, 85, 247, 0.1)' : 'rgba(106, 17, 203, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: textColor
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false
                                    },
                                    ticks: {
                                        color: textColor
                                    }
                                }
                            }
                        }
                    });
                }
            }

            // 根据语言筛选博客文章
            function filterBlogPosts(lang) {
                const postsContainer = document.getElementById('recent-posts-container');
                if (!postsContainer) return;

                const allPosts = postsContainer.querySelectorAll('.blog-post-item');
                let visibleCount = 0;

                allPosts.forEach(post => {
                    const postLang = post.getAttribute('data-lang') || 'en';
                    if (postLang === lang) {
                        post.style.display = 'block';
                        visibleCount++;
                    } else {
                        post.style.display = 'none';
                    }
                });

                // 如果没有匹配的博客，显示提示
                const noPostsMsg = postsContainer.querySelector('.no-posts-message');
                if (visibleCount === 0) {
                    if (!noPostsMsg) {
                        const msg = document.createElement('div');
                        msg.className = 'no-posts-message p-6 text-center text-gray-500 dark:text-gray-400';
                        msg.innerHTML = '<i class="fa-solid fa-blog text-4xl mb-3"></i><p>' +
                            (lang === 'zh' ? '暂无中文博客文章' : 'No English blog posts yet') + '</p>';
                        postsContainer.appendChild(msg);
                    }
                } else {
                    if (noPostsMsg) {
                        noPostsMsg.remove();
                    }
                }
            }

            // 语言切换按钮事件
            languageToggle.addEventListener('click', function() {
                const newLang = currentLang === 'zh' ? 'en' : 'zh';
                setLanguage(newLang);
            });

            // 初始化语言
            setLanguage(currentLang);

            /* 极简模式功能 */
            const minimalModeToggle = document.getElementById('minimal-mode-toggle');
            // 修改选择器，包含所有板块，修复转义字符
            const contentSections = document.querySelectorAll('div.lg\\:col-span-1, div.lg\\:col-span-2 > div');
            const bgImage = document.querySelector('.bg-image');
            let isMinimalMode = false;
            
            // 极简模式切换事件处理
            minimalModeToggle.addEventListener('click', () => {
                isMinimalMode = !isMinimalMode;
                
                if (isMinimalMode) {
                    // 进入极简模式：隐藏所有板块，背景blur效果逐渐消失
                    contentSections.forEach(section => {
                        section.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        section.style.opacity = '0';
                        section.style.transform = 'translateY(20px)';
                        section.style.pointerEvents = 'none';
                    });
                    
                    // 移除背景模糊效果
                    if (bgImage) {
                        bgImage.style.transition = 'filter 0.5s ease';
                        bgImage.style.filter = 'blur(0px)';
                    }
                    
                    // 给极简模式按钮添加激活样式
                    minimalModeToggle.classList.add('bg-primary/20', 'dark:bg-primary-dark/20');
                    minimalModeToggle.querySelector('i').classList.add('text-primary', 'dark:text-primary-dark');
                } else {
                    // 退出极简模式：显示所有板块，恢复背景blur效果
                    contentSections.forEach(section => {
                        section.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        section.style.opacity = '1';
                        section.style.transform = 'translateY(0)';
                        section.style.pointerEvents = 'auto';
                    });
                    
                    // 恢复背景模糊效果
                    if (bgImage) {
                        bgImage.style.transition = 'filter 0.5s ease';
                        bgImage.style.filter = 'blur({{ config.background.blur }}px)';
                    }
                    
                    // 移除极简模式按钮的激活样式
                    minimalModeToggle.classList.remove('bg-primary/20', 'dark:bg-primary-dark/20');
                    minimalModeToggle.querySelector('i').classList.remove('text-primary', 'dark:text-primary-dark');
                }
            });

            // 添加页面滚动动画
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fade-in');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.card-hover:not(.animate-fade-in)').forEach(card => {
                observer.observe(card);
            });

            /* ========== 命令行界面 ========== */
            const terminal = {
                element: document.getElementById('terminal-cli'),
                output: document.getElementById('terminal-output'),
                input: document.getElementById('terminal-input'),
                closeBtn: document.getElementById('terminal-close'),
                history: [],
                historyIndex: -1,
                posts: {{ recent_posts | tojson if recent_posts else '[]' | safe }},
                postsTree: {{ posts_tree | tojson if posts_tree else '{}' | safe }},

                commands: {
                    help: () => {
                        return `<div class="terminal-success">Available commands:</div>
                                <div class="terminal-info">  ls              - List blog posts with index</div>
                                <div class="terminal-info">  tree            - Display folder structure</div>
                                <div class="terminal-info">  cat [index]     - Read a blog post by index (e.g., cat 0)</div>
                                <div class="terminal-info">  cd [page]       - Navigate to page (blog/home)</div>
                                <div class="terminal-info">  whoami          - Display user info</div>
                                <div class="terminal-info">  neofetch        - System information</div>
                                <div class="terminal-info">  clear           - Clear terminal</div>
                                <div class="terminal-info">  exit            - Close terminal</div>`;
                    },

                    tree: () => {
                        let output = '<div class="terminal-success">posts/</div>';
                        let treeText = '';

                        function printTree(node, prefix = '', isLast = true) {
                            let result = '';
                            const folders = Object.keys(node).filter(k => !k.startsWith('_'));

                            folders.forEach((folder, index) => {
                                const isLastFolder = index === folders.length - 1 && (!node[folder]['_files'] || node[folder]['_files'].length === 0);
                                const connector = isLastFolder ? '└── ' : '├── ';
                                const extension = isLastFolder ? '    ' : '│   ';

                                result += prefix + connector + '<span class="terminal-info">' + folder + '/</span><br>';

                                const files = node[folder]['_files'] || [];
                                files.forEach((file, fIndex) => {
                                    const isLastFile = fIndex === files.length - 1 && Object.keys(node[folder]['_folders'] || {}).length === 0;
                                    const fileConnector = isLastFile ? '└── ' : '├── ';
                                    result += prefix + extension + fileConnector + file.name + '.md<br>';
                                });

                                if (node[folder]['_folders']) {
                                    result += printTree(node[folder]['_folders'], prefix + extension, false);
                                }
                            });

                            return result;
                        }

                        treeText = printTree(terminal.postsTree);
                        output += '<div style="line-height: 1.4;">' + treeText + '</div>';

                        // 统计信息
                        let totalFiles = 0;
                        let totalFolders = 0;

                        function countItems(node) {
                            Object.keys(node).forEach(key => {
                                if (!key.startsWith('_')) {
                                    totalFolders++;
                                    if (node[key]['_files']) {
                                        totalFiles += node[key]['_files'].length;
                                    }
                                    if (node[key]['_folders']) {
                                        countItems(node[key]['_folders']);
                                    }
                                }
                            });
                        }

                        countItems(terminal.postsTree);
                        output += '<br><div style="opacity: 0.7;">' + totalFolders + ' directories, ' + totalFiles + ' files</div>';

                        return output;
                    },

                    ls: () => {
                        if (terminal.posts.length === 0) {
                            return '<div class="terminal-error">No posts found</div>';
                        }
                        let output = '<div class="terminal-success">Blog Posts:</div>';
                        terminal.posts.forEach((post, idx) => {
                            output += `<div class="terminal-info">  [${idx}] ${post.date} - ${post.title}</div>`;
                        });
                        output += '<div style="margin-top: 10px; opacity: 0.7;">Use "cat [index]" to read a post (e.g., cat 0)</div>';
                        return output;
                    },

                    cat: (args) => {
                        if (args.length === 0) {
                            return '<div class="terminal-error">Usage: cat [index]</div><div>Example: cat 0</div>';
                        }

                        const index = parseInt(args[0]);
                        if (isNaN(index) || index < 0 || index >= terminal.posts.length) {
                            return `<div class="terminal-error">Invalid index: ${args[0]}</div><div>Use "ls" to see available posts</div>`;
                        }

                        const post = terminal.posts[index];
                        let output = `<div class="terminal-success" style="font-size: 16px; margin-bottom: 10px;">${post.title}</div>`;
                        output += `<div class="terminal-info" style="margin-bottom: 15px;">Date: ${post.date} | Tags: ${post.tags.join(', ')}</div>`;

                        if (post.summary) {
                            output += `<div style="margin-bottom: 15px; font-style: italic; opacity: 0.8;">${post.summary}</div>`;
                        }

                        output += `<div class="terminal-post-content">`;
                        output += `<div style="margin-bottom: 10px;">📝 To read the full article, visit:</div>`;
                        output += `<a href="post/${post.slug}.html" target="_blank" style="color: {{ config.theme.primary_color }}; text-decoration: underline;">post/${post.slug}.html</a>`;
                        output += `</div>`;

                        return output;
                    },

                    cd: (args) => {
                        const page = args[0];
                        if (page === 'blog') {
                            setTimeout(() => window.location.href = 'blog.html', 500);
                            return '<div class="terminal-success">Navigating to blog...</div>';
                        } else if (page === 'home' || page === '~') {
                            setTimeout(() => window.location.href = 'index.html', 500);
                            return '<div class="terminal-success">Navigating to home...</div>';
                        } else {
                            return '<div class="terminal-error">Unknown page: ' + page + '</div>';
                        }
                    },

                    whoami: () => {
                        return `<div class="terminal-success">{{ github_info.name }}</div>
                                <div class="terminal-info">{{ github_info.bio }}</div>
                                <div class="terminal-info">GitHub: {{ config.github_url }}</div>`;
                    },

                    neofetch: () => {
                        const isDark = htmlElement.classList.contains('dark');
                        return `<pre class="terminal-success" style="line-height: 1.3; font-size: 11px; font-family: monospace;">
            __,aaPPPPPPPPaa,__                 <span class="terminal-info" style="font-weight: bold;">{{ github_info.name }}@blog</span>
         ,adP"""'          \`""Yb,_             <span style="opacity: 0.6;">-------------------------</span>
      ,adP'                     \`"Yb,          <span class="terminal-info">OS:</span> Web Blog System
    ,dP'     ,aadPP"""""YYba,_     \`"Y,        <span class="terminal-info">Host:</span> GitHub Pages
   ,P'    ,aP"'            \`""Ya,     "Y,      <span class="terminal-info">Kernel:</span> Python + Flask
  ,P'    aP'     _________     \`"Ya    \`Yb,   <span class="terminal-info">Uptime:</span> ${new Date().getFullYear() - 2024} years
 ,P'    d"    ,adP""""""""Yba,    \`Y,    "Y,  <span class="terminal-info">Shell:</span> Terminal CLI (~ key)
,d'   ,d'   ,dP"            \`Yb,   \`Y,    \`Y, <span class="terminal-info">Theme:</span> ${isDark ? 'Dark Mode' : 'Light Mode'}
d'   ,d'   ,d'    ,dP""Yb,    \`Y,   \`Y,    \`b <span class="terminal-info">Icons:</span> Font Awesome 6.4
8    d'    d'   ,d"      "b,   \`Y,   \`8,    Y,<span class="terminal-info">Terminal:</span> JetBrains Mono
8    8     8    d'    _   \`Y,   \`8    \`8    \`b<span class="terminal-info">DE:</span> Tailwind CSS 3.x
8    8     8    8     8    \`8    8     8     8 <span class="terminal-info">WM:</span> JavaScript SPA
8    Y,    Y,   \`b, ,aP     P    8    ,P     8 <span class="terminal-info">Repos:</span> {{ github_info.total_repos }}
I,   \`Y,   \`Ya    """"     d'   ,P    d"    ,P<span class="terminal-info">Stars:</span> {{ github_info.total_stars }}
\`Y,   \`8,    \`Ya         ,8"   ,P'   ,P'    d'<span class="terminal-info">Posts:</span> ${terminal.posts.length}
 \`Y,   \`Ya,    \`Ya,,__,,d"'   ,P'   ,P"    ,P <span class="terminal-info">Languages:</span> 中文/English
  \`Y,    \`Ya,     \`""""'     ,P'   ,d"    ,P' <span class="terminal-info">Bio:</span> {{ github_info.bio }}
   \`Yb,    \`"Ya,_          ,d"    ,P'    ,P'  <span class="terminal-info">Site:</span> {{ config.site_url }}
     \`Yb,      ""YbaaaaaadP"     ,P'    ,P'   <span class="terminal-info">Memory:</span> ~${(performance.memory ? (performance.memory.usedJSHeapSize / 1048576).toFixed(2) : 'N/A')} MB
       \`Yba,                   ,d'    ,dP'
          \`"Yba,__       __,adP"     dP"
              \`"""""""""""""'
                        </pre>`;
                    },

                    clear: () => {
                        terminal.output.innerHTML = '';
                        return '';
                    },

                    exit: () => {
                        terminal.close();
                        return '';
                    }
                },

                open: function() {
                    this.element.classList.add('active');
                    this.input.focus();
                    if (this.output.innerHTML === '') {
                        this.print('<div class="terminal-success">Welcome to the terminal! Type "help" for available commands.</div>');
                    }
                },

                close: function() {
                    this.element.classList.remove('active');
                },

                print: function(text) {
                    const line = document.createElement('div');
                    line.className = 'terminal-line';
                    line.innerHTML = text;
                    this.output.appendChild(line);
                    this.output.scrollTop = this.output.scrollHeight;
                },

                execute: function(input) {
                    const parts = input.trim().split(' ');
                    const command = parts[0].toLowerCase();
                    const args = parts.slice(1);

                    this.print(`<div class="terminal-info">$ ${input}</div>`);

                    if (this.commands[command]) {
                        const output = this.commands[command](args);
                        if (output) this.print(output);
                    } else if (input.trim() === '') {
                        return;
                    } else {
                        this.print(`<div class="terminal-error">Command not found: ${command}</div>`);
                    }

                    this.history.push(input);
                    this.historyIndex = this.history.length;
                }
            };

            // 按 ~ 键打开终端
            document.addEventListener('keydown', (e) => {
                if (e.key === '`' || e.key === '~') {
                    e.preventDefault();
                    terminal.open();
                } else if (e.key === 'Escape') {
                    terminal.close();
                }
            });

            // 终端关闭按钮
            terminal.closeBtn.addEventListener('click', () => terminal.close());

            // 终端输入处理
            terminal.input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    const input = terminal.input.value;
                    terminal.execute(input);
                    terminal.input.value = '';
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (terminal.historyIndex > 0) {
                        terminal.historyIndex--;
                        terminal.input.value = terminal.history[terminal.historyIndex];
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (terminal.historyIndex < terminal.history.length - 1) {
                        terminal.historyIndex++;
                        terminal.input.value = terminal.history[terminal.historyIndex];
                    } else {
                        terminal.historyIndex = terminal.history.length;
                        terminal.input.value = '';
                    }
                }
            });
        });
    </script>
</body>
</html>